# 备忘学习文档

- [备忘学习文档](#%E5%A4%87%E5%BF%98%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3)
    - [idea](#idea)
    - [tomcat](#tomcat)
    - [chrome浏览器](#chrome%E6%B5%8F%E8%A7%88%E5%99%A8)
    - [html](#html)
    - [mongo](#mongo)
    - [freemarker 语法](#freemarker-%E8%AF%AD%E6%B3%95)
    - [JAVA](#java)
    - [git命令](#git%E5%91%BD%E4%BB%A4)
        - [解决git pull push每次都需要输入密码问题](#%E8%A7%A3%E5%86%B3git-pull-push%E6%AF%8F%E6%AC%A1%E9%83%BD%E9%9C%80%E8%A6%81%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81%E9%97%AE%E9%A2%98)
        - [gitignore文件用法](#gitignore%E6%96%87%E4%BB%B6%E7%94%A8%E6%B3%95)
        - [查看命令语法](#%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4%E8%AF%AD%E6%B3%95)
        - [日志命令](#%E6%97%A5%E5%BF%97%E5%91%BD%E4%BB%A4)
    - [markdown](#markdown)
    - [http](#http)
        - [跨域 CORS](#%E8%B7%A8%E5%9F%9F-cors)
    - [mysql](#mysql)
    - [lucene](#lucene)

## idea

maven控制台中文乱码
> Setting->maven->runner   设置VMoptions: -Dfile.encoding=GB2312

快捷键

- outline 视图 `ctrl+F12`
- 导入包,自动修正 `Alt+回车`
- 查找类 `Ctrl+N`
- 查找文件 `Ctrl+Shift+N`
- 格式化代码 `Ctrl+Alt+L`
- 优化导入的类和包 `Ctrl+Alt+O`
- 生成代码(如get,set方法,构造函数等) `Alt+Insert`
- 最近更改的代码 `Ctrl+E或者Alt+Shift+C`
- 替换文本 `Ctrl+R`
- 查找文本 `Ctrl+F`
- 自动补全代码 `Ctrl+Shift+Space`
- 代码提示 `Ctrl+空格`
- 类名或接口名提示 `Ctrl+Alt+Space`
- 方法参数提示 `Ctrl+P`
- 查找类中的方法或变量 `Ctrl+Shift+Alt+N`
- 对比最近修改的代码 `Alt+Shift+C`
- 重构-重命名 `Shift+F6`
- 移动行 `Ctrl+Shift+先上键`
- 删除行 `Ctrl+X``Ctrl+Y`
- 复制行 `Ctrl+D`
- 注释（//或者/*...*/） `Ctrl+/` `Ctrl+Shift+/`
- 自动代码 `Ctrl+J`
- 最近打开的文件 `Ctrl+E`
- 显示类结构图 `Ctrl+H`
- 显示注释文档 `Ctrl+Q`
- 查找代码所在位置 `Alt+F1`
- 快速打开或隐藏工程面板 `Alt+1`
- 返回至上次浏览的位置 `Ctrl+Alt+left/right`
- 切换代码视图 `Alt+left/right`
- 在方法间快速移动定位 `Alt+Up/Down`
- 代码向上/下移动。 `Ctrl+Shift+Up/Down`
- 高亮错误或警告快速定位 `F2或Shift+F2`
- 代码标签输入完成后，按Tab，生成代码。 `tab`
- 选中文本，高亮显示所有该文本，按Esc高亮消失。 `Ctrl+Shift+F7`
- 选中代码，连续按会有其他效果 `Ctrl+W`
- 选中文本，逐个往下查找相同文本，并高亮显示。 `按Alt+F3`
- 光标跳转到第一行或最后一行下 `Ctrl+Up/Down`
- 快速打开光标处的类或方法 `Ctrl+B`
- 大小写 `ctrl+shift+U`
- 选定代码块(trycatch if for) `Ctrl+Shift+T`

自定义快捷键

- 左右分屏 `alt+]`
- 上下分屏 `alt+[`
- 复制整行 `ctrl+win`

文件颜色

> 绿色：已经加入版本控制暂未提交；  
> 红色：未加入版本控制；  
> 蓝色：加入版本控制，已提交，有改动；  
> 白色：加入版本控制，已提交，无改动；  
> 灰色：版本控制已忽略文件。

编码快捷

- 100.fori list.for 快速for循环

在intellij idea中打jar包，运行提示没有主清单属性
> 可能是 IntelliJ 的问题。
> 在 Project Structure - Artifacts 里面选好 Main Class 之后，IntelliJ 会自动在下边的 Directory for META-INF/MANIFEST.MF 里填上 `/$PROJECT_DIR/src/main/java`
把这行里边的 `main/java` 删掉，变成 `/$PROJECT_DIR/src/` 试试

maven乱码
> windows环境下，Intellij idea12中maven操作时，控制台中文乱码问题（编译报错或者clean install时出现的其他错误描述乱码）
> 在cmd中mvn中文正常显示,log4j打印日志也是ok的。
> 解决方法：
> Setting->maven->runner  VMoptions: -Dfile.encoding=GB2312

intellij 出现“Usage of API documented as @since 1.6+”的解决办法
> File ->Project Structure->Project Settings -> Modules -> 你的Module名字 -> Sources -> Language Level->选个默认的就行。

ctrl+space冲突问题
> 修改注册表 HKEY_CURRENT_USER/Control Panel/Input Method/Hot Keys
00000070 for the Chinese (Traditional) IME - Ime/NonIme Toggle hotkey
00000010 for the Chinese (Simplified) IME - Ime/NonIme Toggle hotkey
把Key Modifiers开头的02改成00
把Virtual Key开头的20改成FF

修改提示首字母区分大小写的问题
> 在IDEA中进行代码提示时，原来在ECLIPSE中输入syso,然后"Alt+/"就可以完成System.out.println("")的输入，但是在IDEA中默认的配置首字母必须输入“S”大小写一致才能匹配到System，如果要输入小写“s”都可以匹配，需要在
> Editor=>Code Completion里把Case sensitive completion设置为None就可以了

日志
> edit configurations > "your server" > logs > add > alias and log file location  
> 5:debug > log > all

## tomcat

> tomcat7默认编码iso8859-1，tomcat8默认编码utf8

## chrome浏览器

调试模式找不到ajax请求的js
> 搜不到ajax请求的js文件，可以设置settings--preferences--sources--search in anonymous and conten script 勾选,用ctrl+shift+f进行搜索

模拟网速慢的情况
> 按F12，打开Chrome调试工具 setting>Throttlting>add customer profile  
> 在network标签下选择 no throttling-->add ，再输入相应的限速即可

## html

a标签click不触发转跳

```html
<a id="alink" href="abc.aspx" style="visibility: hidden;">下一步</a> 
<script>
    $("#alink").click(); // 触发了a标签的点击事件，但是没有触发页面跳转 
    document.getElementById("alink").click(); //既触发了a标签的点击事件，又触发了页面跳转
</script>
```

## mongo

查询

```javascript
db.col.find({key1:value1, key2:value2}).pretty()
```

插入

```javascript
document=({
    title: 'MongoDB 教程',
    description: 'MongoDB 是一个 Nosql 数据库'
});
db.COLLECTION_NAME.insert(document)
```

## freemarker 语法

三目运算符

```java
<#if (applyBaseinfoEntity.applyException)??>
      ${(applyBaseinfoEntity.applyException == '0')?string('否','是')?html}
</#if>
```

## JAVA

枚举类通过值获取对象

```java
public static TradeStatus getByValue(int value) {
    for (TradeStatus tradeStatus : values()) {
        if (tradeStatus.getValue() == value) {
            return tradeStatus;
        }
    }
    return null;
}
```

## git命令

1、安装原生git、安装一个git客户端（sourceTree/小乌龟git）  
2、新建一个本地仓库：新建文件夹，进入 git bash

```shell
$ mkdir learngit
$ cd learngit
$ pwd
/Users/michael/learngit
# 这就创建了一个仓库
$ git init
Initialized empty Git repository in /Users/michael/learngit/.git/
# 这就初始化了一个仓库
```

3、然后在这个仓库文件夹中新建一个文件，在git bash中就可以add commit了  
4、从远程获取

```shell
git clone http样式的仓库地址，输入用户名密码克隆下来（使用ssh样式需要配置ssh密钥）
```

5、获取分支

```shell
# 进入到克隆下来的文件夹中：
cd 文件夹
git branch
git branch -a
git checkout -b 分支名称 origin/分支名称
# 然后就把分支获取了
```

6、合并分支（记得push到远端）:先在本地合并，然后再push到远端。  
（1）假如说要将dev分支合并到master分支上  
首先，从服务器拉取master代码，并且创建本地分支：`git checkout -b 分支名称 origin/分支名称` 
然后，切换到master分支上：`git checkout master` 
然后，将dev合并到master上： `git merge`   
然后检查代码  
然后将合并好的master分支push到远端：`git push`(就可以使用命令git push origin master推送最新修改；)
（2）给当前分支添加标签tag  
一般都是将分支合并到master之后，在该处的master打一个tag作为标记。  
首先，切换到要打tag的分支，比如master，git checkout master  
然后，git tag 标签的名字，这样就给本地的develop分支打了一个标签；
然后将标签推到远端：git push origin 标签的名字 ，或者使用git push origin --tags 将全部未推送过的本地标签推送到远端。
另外，git tag 查看所以标签；git tag -d 标签名称 删除一个本地标签；git push origin :refs/tags/标签名称  这样删除一个远程标签，注意origin后面的空。
（3）在master上拉取一个新的远端分支，并跟本地分支关联。
因为用命令行是没有办法直接创建新的远端分支的（除非在gitlab上手动创建），做法是先在本地拉取一个新分支，然后推到远端，然后关联
首先，切换到master分支， `git checkout master`
然后，在本地拉取一个新的分支，`git checkout -b b5`(自己取的分支名称，这里就当是b5吧)；
然后，将本地分支推送到远端，`git push origin b5:b5`(第一个b5是本地分支名称，第二个b5是对应远端分支名称)；
然后，将两个分支关联起来，`git checkout b5`切换到b5分支，然后 `git branch -u origin/b5 b5` 这就将两个分支关联起来了。
可以使用命令 `git branch -vv` 查看关联关系

### 解决git pull push每次都需要输入密码问题

如果我们git clone的下载代码的时候是连接的https://而不是git@git (ssh)的形式，当我们操作git pull/push到远程的时候，总是提示我们输入账号和密码才能操作成功，频繁的输入账号和密码会很麻烦。
解决办法：
git bash进入你的项目目录，输入：
git config --global credential.helper store
然后你会在你本地生成一个文本，上边记录你的账号和密码。当然这些你可以不用关心。
然后你使用上述的命令配置好之后，再操作一次git pull，然后它会提示你输入账号密码，这一次之后就不需要再次输入密码了。

### gitignore文件用法

在git中如果想忽略掉某个文件，不让这个文件提交到版本库中，可以使用修改根目录中 .gitignore 文件的方法（如无，则需自己手工建立此文件）。这个文件每一行保存了一个匹配的规则例如：

```shell
# 此为注释 – 将被 Git 忽略
*.a       # 忽略所有 .a 结尾的文件
!lib.a    # 但 lib.a 除外
/TODO     # 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
build/    # 忽略 build/ 目录下的所有文件
doc/*.txt # 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
```

规则很简单，不做过多解释，但是有时候在项目开发过程中，突然心血来潮想把某些目录或文件加入忽略规则，按照上述方法定义后发现并未生效，原因是.gitignore只能忽略那些原来没有被track的文件，如果某些文件已经被纳入了版本管理中，则修改.gitignore是无效的。那么解决方法就是先把本地缓存删除（改变成未track状态），然后再提交：

```shell
git rm -r --cached .
git add .
git commit -m 'update .gitignore'
```

### 查看命令语法

```shell
git help commit # 在浏览器查看commit命令
git commit -help # 在当前窗口查看commit命令
git commit --help # 在浏览器查看commit命令
```

### 日志命令

```shell
git log --stat # 想看到每次提交的简略的统计信息
git log --pretty=oneline # 美化一行
git log --pretty=format:"%h - %an, %ar : %s" # 格式化日志
git log --pretty=format:"%h %s" --graph # ASCII字符 展示你的分支、合并历史
```

## markdown

code 语法

| 名称             | 关键字                      |
| ---------------- | --------------------------- |
| AppleScript      | applescript                 |
| ActionScript 3.0 | actionscript3   , as3       |
| Shell            | bash   , shell              |
| ColdFusion       | coldfusion   , cf           |
| C                | cpp   , c                   |
| C#               | c#   , c-sharp , csharp     |
| CSS              | css                         |
| Delphi           | delphi   , pascal , pas     |
| diff&patch       | diff   patch                |
| Erlang           | erl   , erlang              |
| Groovy           | groovy                      |
| Java             | java                        |
| JavaFX           | jfx   , javafx              |
| JavaScript       | js   , jscript , javascript |
| Perl             | perl   , pl , Perl          |
| PHP              | php                         |
| text             | text   , plain              |
| Python           | py   , python               |
| Ruby             | ruby   , rails , ror , rb   |
| SASS&SCSS        | sass   , scss               |
| Scala            | scala                       |
| SQL              | sql                         |
| Visual Basic     | vb   , vbnet                |
| XML              | xml   , xhtml , xslt , html |
| Objective C      | objc   , obj-c              |
| F#               | f#   f-sharp , fsharp       |
|                  | xpp   , dynamics-xpp        |
| R                | r   , s , splus             |
| matlab           | matlab                      |
| swift            | swift                       |
| GO               | go   , golang               |

## http

### 跨域 CORS

"跨域资源共享"（Cross-origin resource sharing）
参考[跨域资源共享 CORS 详解](http://www.ruanyifeng.com/blog/2016/04/cors.html)

图片跨域
> 错误 Uncaught DOMException: Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.
> 由于canvas受限于 CORS 策略
> 解决方法：img.setAttribute("crossOrigin",'Anonymous')，同时服务器端设置Access-Control-Allow-Origin: * 和 Access-Control-Allow-Methods: GET, POST, PUT就可以了

jsonp跨域 参考 [浏览器同源政策及其规避方法](http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html)
> JSONP是服务器与客户端跨源通信的常用方法。最大特点就是简单适用，老式浏览器全部支持，服务器改造非常小。  
> 它的基本思想是，网页通过添加一个`<script>`元素，向服务器请求JSON数据，这种做法不受同源政策限制；服务器收到请求后，将数据放在一个指定名字的回调函数里传回来。  
> 首先，网页动态插入`<script>`元素，由它向跨源网址发出请求。 

```javascript
    function addScriptTag(src) {
        var script = document.createElement('script');
        script.setAttribute("type","text/javascript");
        script.src = src;
        document.body.appendChild(script);
    }

    window.onload = function () {
        addScriptTag('http://example.com/ip?callback=foo');
    }

    function foo(data) {
        console.log('Your public IP address is: ' + data.ip);
    };
```

> 上面代码通过动态添加`<script>`元素，向服务器example.com发出请求。注意，该请求的查询字符串有一个callback参数，用来指定回调函数的名字，这对于JSONP是必需的。  
> 服务器收到这个请求以后，会将数据放在回调函数的参数位置返回。

```javascript
foo({
  "ip": "8.8.8.8"
});
```

> 由于`<script>`元素请求的脚本，直接作为代码运行。这时，只要浏览器定义了foo函数，该函数就会立即调用。作为参数的JSON数据被视为JavaScript对象，而不是字符串，因此避免了使用JSON.parse的步骤。

## mysql

window开启mysql服务
> net start mysql

## lucene

倒排索引
> 文档是有许多的单词组成的，其中每个单词也可以在同一个文档中重复出现很多次，当然，同一个单词也可以出现在不同的文档中。  
> 正排索引(forward index)：从文档角度看其中的单词，表示每个文档（用文档ID标识）都含有哪些单词，以及每个单词出现了多少次（词频）及其出现位置（相对于文档首部的偏移量）。  
> 倒排索引(inverted index，或inverted files)：从单词角度看文档，标识每个单词分别在那些文档中出现(文档ID)，以及在各自的文档中每个单词分别出现了多少次（词频）及其出现位置（相对于该文档首部的偏移量）。  
> **简单记为：**  
> 正排索引：文档 ---> 单词  
> 倒排索引：单词 ---> 文档  
